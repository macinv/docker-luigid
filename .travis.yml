language: python
sudo: required
services:
  - docker

env:
  global:
    - IMAGE_NAME="luigid"
    - CONTAINER_NAME="luigid"
    - secure: "Xf+uPmZWJ4oCPmq3/fIiHAy47D9x+VbMFxO9XAwv3K+O9T5KsahvT3T/bFWDrF/DdwjXji/56cQPCE79XFJPgddS9ItDS4MVxwZRCRSFkmiyP6jhCw62oCCf/puv8NgFUIBbqiQLJ7sOvNSGom3OMzEuk5PpbayvKecsuzwJnP4+lLBYMo8gU6WdpITF8TTUnBDksa5IiZQwVcRPpHUhSTRgAox13mouaJ0lpLU4YLQYFbJfUv4wP4gG1ZsdeoRbMm6NRCs+hMczDRFZXQIRGeftCznR2tfTkI2ftXg+RWr8H5ZfuoRTaLnA/pewaF+tMzMF7g/r8MLgkdQKz0CRa/cTKsbuN/mOvyH7cqd0U+3wxIFzun2ar18rb2b3jrdGUvz5I50/icQksoZ/D29fvQblqiN+xF2iNb7IefdteyqE5zVmsVWxVB7A6++dwq8ayPzpUxD0R8dnBTeu/J7UiNYI+nObHD03SBB4XlI4WFdWwPa9PCD6lPoOalAHlF1FgExc6V/7i13c1bABKxiyolv0YJetUQW9r5M8Vl5VrYHKeeNMqH6F/oYG+Rl7VmACyOFmUs1trbgjN0CApEalVm9+rGrWJI3UzP5xYgTYNHpJdD47TD3DKf/tROTY9YgLUWL8sjSAvUAZzf1UvgTA9izX8Re8s7xM2Aup1A1ouJY="
    - secure: "ZTSTqnjgDCLts6XlGmTXepIYCMJkrOyRca6pxMu0J/gEeEpmeBfq5kTVLOvJcPzjUOYTF8F/Y0DxR+2qLn6iF+1RYGQQOQ/vtNl+eJPAgTJLq+j7S2A1F/DbSlJBYl6DV1yHS/WOCMIaK6kIbdw4Xcqz4Z2QdVbsMFszJB0iqz0rSnFn06nAOzulrucJcYfgEvZY/nlg/zQ041SSoyM6OmA3F7UnAnBlR4R+IjM+IhXTlogqmzIvC6+sS3WsKpOCmiwop9TSBdYy+68Uax8FYuUpzhAb/Y26J2eL8nP5Laa6KSB6Xv+0KLbrg05bb4mmXb6z/J60VwiTS5FpOoTCeToJIdDmWYDz7/9lLa0Ec21XND1wJa7cCUS1fjCFqAMo5B8L5Vxqr3vHmhxxCG+5UwOdql6ZlA9MiI/GA37wWsNpBkcOVIF6bsVMRcM9Qx5bMnDaHDHbH0yogqAq0NTR4otTfZxyh4ujlW0u3lZvuKOIV7AIf1L3k4RuZnDLAWScgIe+NawDfAfWZfTR4j3yQCEMNCn7w+KSO2eZq4aB6Nz9L1Kxk7zF6+Uv6clgjnW43p0kPDmd9Sa3s4gewMKhY0V85BCtXN+NfotM2UNCh76pr5sVk9/At3Zrj+/oPVAFRp0mrDQnv7p6p94zGbom01k3Va+buZU9i4k+90TfGgQ="

before_install:
  - openssl aes-256-cbc -K $encrypted_4f5dd6dc2a00_key -iv $encrypted_4f5dd6dc2a00_iv -in repository_password.enc -out repository_password -d

script:
  - travis_retry bash test_docker.sh

deploy:
  skip_cleanup: true
  provider: script
  script: bash deploy.sh
  on:
    tags: true

notifications:
  email: true
  secure: "UxJZDq4IPtnkS2uLLiQUoG1uC6dnMppaVWGAQJvBmeYYIXBs40g1ghbnH+oa+3bPR2hUqxKB97dBAk4C0ZV8eTWDoIy5aNHZYHF/qmvMCukq+uN633Ght7g9b3h80VfNl12O0GQRBAxPVatYLFVcBRLsdc/T0lyLPyAn5KfQkNpJ40KmahdDK2P4K59Q6FFd8LpyVApIdrLc1kYHdfTzBSjrqMQy8TEq3BNxbrPNsYwpDpWzD6icTDxsrr0xhi8KS0bGcseA2+mu6Juk9TQdg0dNTqx/CVHcCt4eFOFxjWoH4F5Rz+rMlPAyoFYr/5i3oYAb2Cc3wdCC68izm3UgUaB7e1B53Icq8I08memEJ5NGJh1+aZEwV95F3gyGREw7X6Bb4emzR0kK6m/XKImLBOKPxuFyG0WhoAJogP+sI2+3WwwSgrwiP7vAVbdiwTdP9966VXwdOvNBSHKurE3mt1jKc/tEXDZU8FjRx2h0bmtylLgDP8maLMbOdSGkhd/uuxWfpa9Mbpyg60Ier1ffExeaOJbqy4JCRXarLMuOtd2B0f8ehPXzTfjW9ZnJf6P7Tb2pxPctXzLGlXwMMalgdGaxOcf1mz2rh+04EcDgC1SR1U6qSkiyGjHdKl1FVBIZnIUzUPnUPAAxTkEbjz2nDhOm6Ueioeu+bf0il79PCJs="
